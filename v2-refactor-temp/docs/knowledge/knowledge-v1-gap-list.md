# Knowledge V1 Gap List

> **最后更新**: 2026-02-06

## 文档目的

本文件仅记录以下内容：

- **v1 曾有但当前 PR 暂时移除/下线的能力**
- 这些能力在后续需要由**其他模块或其他 PR**配合回补的事项

本文件**不是** changelog，也不是通用 tracker。

## 范围说明

当前知识库已统一到 Data API 与 `@renderer/hooks/useKnowledge`。
在迁移过程中，部分能力因职责边界调整被暂时下线，等待跨模块回补。

## 暂时下线能力（待后续回补）

### 1) 知识库文件清理/体积管理入口

- **v1 状态**：`DataSettings` 提供“知识库文件清理”入口（通过旧 `useKnowledgeFiles.tsx`）
- **当前状态**：入口已在本次迁移中移除
- **下线原因**：该能力属于文件生命周期管理，非知识库领域核心职责
- **后续回补方向**：由文件管理模块提供统一的文件体积统计与清理能力，并在设置页接入
- **依赖/前置**：文件管理域能力设计与 API 落地（跨 PR）

### 2) 删除知识库后的 assistant/preset 联动清理

- **v1 状态**：删除知识库时，旧 hook 内含 assistant/preset 引用清理副作用
- **当前状态**：该副作用已从知识库基础 hook 移除
- **下线原因**：副作用不应耦合在基础数据 hook，需由调用方按业务边界控制
- **后续回补方向**：在上层业务（assistant/preset 管理流）实现显式引用清理策略
- **依赖/前置**：assistant/preset 侧流程定义与落地（跨 PR）

### 3) 文档预处理能力协同（示例占位）

- **v1 状态**：预处理能力在历史流程中与知识导入紧耦合
- **当前状态**：v2 重构中该能力仍需与新数据流进一步对齐
- **下线/弱化原因**：迁移分阶段进行，先完成知识读写主链路再补齐预处理协同
- **后续回补方向**：在预处理模块与知识入库流程间建立稳定接口
- **依赖/前置**：预处理模块独立 PR 与接口定稿

## 回补验收标准

当某项能力被回补时，建议至少满足：

1. 责任归属清晰（知识库 vs 文件管理 vs 业务上层）
2. 具备明确入口与用户可见行为
3. 相关数据流在 Data API 架构下闭环
4. 对应测试或验证步骤可复现

## 维护约定

- 仅记录“v1 有 / 当前 PR 暂无 / 需后续 PR 回补”的项
- 每次新增条目请写明：当前状态、原因、回补方向、依赖
- 能力回补完成后，应在对应条目中标注“已回补（PR/日期）”
